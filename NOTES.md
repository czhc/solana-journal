# Notes

## Resources

* [Anchor](https://www.anchor-lang.com/) - Solana's Sealevel runtime framework
* [Program Derived Addressses (PDA)](https://solanacookbook.com/core-concepts/pdas.html): With PDAs, programs can programmatically sign for certain addresses without needing a private key. 
    * PDAs serve as the foundation for Cross-Program Invocation, which allows Solana apps to be composable with one another.
    * PDAs are 32 byte strings that look like public keys, but don’t have corresponding private keys
    * seeds are bumped to find a PDA
* [Cross-Program Invocation](https://solana.com/docs/core/cpi#cross-program-invocations)
    * A Cross Program Invocation (CPI) refers to when one program invokes the instructions of another program. This mechanism allows for the composability of Solana programs.
    * Essentially how one program (contract) can call another backend program in the same execution e.g. initialize mint > create user account > mint token to user account
  
* Rent and discriminators
* [Interface Definition Language](https://www.rareskills.io/post/anchor-idl) (IDL): JSON file that describes how to interact with a Solana program. It is automatically generated by the Anchor framework i.e. ABI
    * Functions in Rust are snake_cased, but Anchor formats them in JavaScript land as camelCased. This is to respect the conventions of the languages: Rust tends to use snake case, and JavaScript typically uses camel case.

This JSON file is how the “methods” object knows what functions to support.

When we run the test, we expect it to pass, which means the test is correctly calling the Solana program:

### Setup

* [Installing Rust on Mac OS X](https://www.petergirnus.com/blog/rust-macos-how-to-install)
* [Installing Anchor](https://www.anchor-lang.com/docs/installation)
* [Setup local development and install the Solana CLI](https://docs.solanalabs.com/cli/install#macos--linux-1)
    * docs repo is inactive. 
    * going with `curl` installation, not homebrew. seems like homebrew doesn't include `solana-test-validator` ([src](https://github.com/Homebrew/homebrew-core/blob/4b29949e7f7a3dab682f14aac123c94cdc949978/Formula/s/solana.rb)) at the moment. 
* [anchor build vs cargo build](https://stackoverflow.com/questions/74273410/difference-between-cargo-build-and-anchor-build)

* Fixing cargo metadata issue: 

Error:

```sh
➜  anchor git:(main) ✗ cargo metadata

warning: please specify `--format-version` flag explicitly to avoid compatibility problems
error: process didn't exit successfully: `rustc -vV` (signal: 6, SIGABRT: process abort signal)
--- stderr
dyld[20719]: Symbol not found: __ZN4llvm10PGOOptionsC1ENSt3__112basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEES7_S7_S7_NS_18IntrusiveRefCntPtrINS_3vfs10FileSystemEEENS0_9PGOActionENS0_11CSPGOActionEbb
```

The error just means `cargo` is not available in your executable PATH. Add the following to your bash profile

```sh
export PATH="$HOME/.cargo/bin:$PATH"
```

Run `cargo metadata` again. 

* [How to resume a deploy](https://solana.stackexchange.com/questions/5961/how-to-resume-a-deploy)
* [Deploy a Solana program with the CLI](https://docs.solanalabs.com/cli/examples/deploy-a-program)
* Anchor incompatibility between 0.29 and 0.30 due to [metadataIDL changes](https://github.com/coral-xyz/anchor/pull/2824)

* Using DevNet on phantom [guide](https://www.blog.goosefx.io/switch-from-mainnet-to-devnet-network-on-solana/)


